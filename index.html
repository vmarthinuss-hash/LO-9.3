Readingquest · HTML
Copy

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReadingQuest - Academic Excellence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        
        .animate-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .vertical-rl {
            writing-mode: vertical-rl;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">
    <div id="app"></div>

    <script>
        // Application State
        let state = {
            currentPage: 'landing',
            activeModule: null,
            showHandbook: false,
            showCertForm: false,
            showFinalCert: false,
            studentInfo: {
                name: '',
                className: ''
            },
            userStats: {
                points: 0,
                completedModules: [],
                streak: 1
            },
            currentStep: 0,
            feedback: null
        };

        // Module Data
        const modules = [
            {
                id: 'marine',
                title: 'Marine Depths',
                subtitle: 'The Impact of Plastic Pollution',
                icon: 'droplets',
                difficulty: 'Intermediate',
                color: 'blue',
                lo: 'LO 9.3.a',
                text: [
                    { id: 'p1', title: 'P1: Environmental Threat', content: "Plastic pollution has emerged as one of the most pressing environmental threats confronting marine ecosystems in the contemporary world. Each year, vast volumes of plastic waste are discharged into the oceans, where they undermine biodiversity and destabilise fragile marine habitats. Owing to the extreme durability and slow degradation of plastic materials, their persistent accumulation generates long-term ecological consequences that disrupt natural food webs and compromise the overall balance of marine environments." },
                    { id: 'p2', title: 'P2: Impact on Fauna', content: "A particularly serious consequence of plastic pollution is its impact on marine fauna. Numerous species inadvertently ingest plastic debris, mistaking it for food, which can result in internal injury, malnutrition, or fatal blockages. Moreover, as larger plastic items fragment into microplastics, toxic chemicals are able to enter marine food chains, increasing the risk of bioaccumulation and posing significant threats not only to wildlife but also to human health through the consumption of contaminated seafood." },
                    { id: 'p3', title: 'P3: Viable Solutions', content: "Although the scale of plastic pollution is alarming, a range of viable solutions has been identified. Measures such as limiting the production of single-use plastics, strengthening waste management infrastructure, and promoting environmental education can substantially reduce the volume of plastic entering marine ecosystems. Ultimately, meaningful progress depends on coordinated and sustained action by governments, industries, and individuals, ensuring that responsibility for environmental protection is shared and that marine ecosystems are preserved for future generations." }
                ],
                questions: [
                    { type: 'Gist', objective: 'Identify Main Ideas', q: "What is the overall topic of the text?", options: ["To describe marine animals", "The impact of plastic pollution on marine ecosystems", "To promote tourism", "History of the ocean"], correct: 1 },
                    { type: 'Purpose', objective: 'Identify Purpose', q: "Which option best describes the writer's purpose?", options: ["To describe marine animals", "To explain causes and effects of plastic pollution", "To argue against environmental protection", "To promote tourism"], correct: 1 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "Identify the main idea of Paragraph 1:", options: ["Plastic is very durable", "Plastic pollution is a pressing threat causing long-term damage", "Fragile habitats are colorful", "Natural food webs are simple"], correct: 1 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "Identify the main idea of Paragraph 2:", options: ["Plastic is mistaken for food by fauna", "Chemicals are toxic", "Microplastics are small", "The serious consequences of plastic on marine fauna and the food chain"], correct: 3 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "Identify the main idea of Paragraph 3:", options: ["Environmental education is boring", "Governments are solely responsible", "Viable solutions depend on coordinated action from all sectors", "Single-use plastic is the only problem"], correct: 2 },
                    { type: 'Sentence Analysis', objective: 'Sentence Purpose', q: "Match the purpose: 'Plastic pollution has become one of the most serious environmental challenges…'", options: ["Introducing the issue", "Explaining consequences", "Providing evidence", "Suggesting solutions"], correct: 0 },
                    { type: 'Sentence Analysis', objective: 'Sentence Purpose', q: "Match the purpose: 'Many species mistakenly consume plastic debris…'", options: ["Introducing the issue", "Explaining consequences", "Providing evidence or examples", "Suggesting solutions"], correct: 2 },
                    { type: 'Sentence Analysis', objective: 'Sentence Purpose', q: "Match the purpose: 'Reducing single-use plastics can significantly limit pollution.'", options: ["Introducing the issue", "Explaining consequences", "Providing evidence", "Suggesting solutions"], correct: 3 }
                ]
            },
            {
                id: 'urban',
                title: 'Urban Jungles',
                subtitle: 'The Rise of Urban Gardening',
                icon: 'leaf',
                difficulty: 'Beginner',
                color: 'green',
                lo: '9.3.a Practice',
                text: [
                    { id: 'p1', content: "In recent years, urban gardening has become increasingly popular in large cities around the world. As space becomes more limited, many people are turning rooftops, balconies, and small community areas into green spaces. These gardens not only provide fresh vegetables and herbs but also help improve air quality and reduce stress." },
                    { id: 'p2', content: "One major reason for the growth of urban gardening is concern about food safety. Many city residents prefer to grow their own produce to avoid chemicals used in commercial farming. In addition, gardening is seen as a relaxing hobby that allows people to connect with nature despite living in busy urban environments." },
                    { id: 'p3', content: "Governments and schools have also begun supporting urban gardening projects. Some cities offer free seeds and training programs, while schools use gardens to teach students about sustainability and healthy eating. As a result, urban gardening is no longer just a trend but a practical solution for greener and healthier cities." }
                ],
                questions: [
                    { type: 'Skimming', objective: 'Identify Main Ideas', q: "What is the main topic of the passage?", options: ["Problems caused by city life", "The popularity and benefits of urban gardening", "How to design rooftop buildings", "The history of farming"], correct: 1 },
                    { type: 'Skimming', objective: 'Identify Main Ideas', q: "Which paragraph mainly discusses reasons why people start urban gardening?", options: ["Paragraph 1", "Paragraph 2", "Paragraph 3", "None of them"], correct: 1 },
                    { type: 'Skimming', objective: 'Identify Main Ideas', q: "Choose the best title for the passage:", options: ["Life in Big Cities", "Farming in the Countryside", "Urban Gardening: A Growing Movement", "The Future of Schools"], correct: 2 },
                    { type: 'Scanning', objective: 'Connection between Details', q: "Name two places where urban gardens are commonly found:", options: ["Basements and Attics", "Rooftops and Balconies", "Libraries and Gyms", "Beaches and Forests"], correct: 1 },
                    { type: 'Scanning', objective: 'Connection between Details', q: "Why do people worry about food safety according to the text?", options: ["They want to avoid chemicals used in commercial farming", "They want to save money", "They think city food is too salty", "They want to sell food at markets"], correct: 0 },
                    { type: 'Scanning', objective: 'Connection between Details', q: "Who supports urban gardening projects?", options: ["Only private companies", "Governments and schools", "Only rural farmers", "Nobody supports them yet"], correct: 1 },
                    { type: 'Scanning', objective: 'Connection between Details', q: "What do schools use gardens to teach students about?", options: ["Architecture", "Sustainability and healthy eating", "Advanced Physics", "Ancient History"], correct: 1 }
                ]
            },
            {
                id: 'tech',
                title: 'Digital Horizons',
                subtitle: 'Technology in Education',
                icon: 'cpu',
                difficulty: 'Advanced',
                color: 'purple',
                lo: 'LO 9.3.a',
                text: [
                    { id: 'p1', content: "In recent decades, technology has become deeply embedded in modern education, fundamentally transforming the ways in which learners access information and engage with knowledge. Digital platforms, educational software, and interactive online resources have extended learning far beyond the physical classroom, enabling continuous access to information. Consequently, students are no longer confined to printed textbooks but can draw upon diverse sources that promote independent inquiry and flexible learning pathways." },
                    { id: 'p2', content: "A key advantage of educational technology lies in its capacity to personalise the learning experience. Many digital systems are designed to adapt to individual learners, allowing them to revisit complex concepts, practise skills repeatedly, or progress at an accelerated pace when appropriate. This level of adaptability supports a wide range of learning abilities and has the potential to narrow achievement gaps, particularly in classrooms where students demonstrate varying levels of prior knowledge and academic readiness." },
                    { id: 'p3', content: "Despite these advantages, the growing reliance on technology in education also raises important concerns. Excessive use of digital tools may limit opportunities for direct social interaction, thereby affecting the development of communication and collaboration skills. Moreover, unequal access to technological resources can exacerbate existing educational inequalities. For this reason, technology should be integrated in a balanced and purposeful manner, ensuring that it complements—rather than replaces—effective teaching practices and meaningful human interaction." }
                ],
                questions: [
                    { type: 'Gist', objective: 'Identify Main Ideas', q: "What is the overall topic of the text?", options: ["The history of computers", "The role and impact of technology in modern education", "How to use social media", "Replacing schools with apps"], correct: 1 },
                    { type: 'Purpose', objective: 'Identify Purpose', q: "Which option best describes the writer's purpose?", options: ["To describe technology in education", "To evaluate benefits and limitations of technology in education", "To persuade schools to replace teachers", "To explain how to use social media in schools"], correct: 1 },
                    { type: 'Sentence Purpose', objective: 'Sentence Purpose', q: "What is the purpose of: 'In recent decades, technology has become deeply embedded...'?", options: ["Topic sentence", "Example", "Limitation", "Recommendation"], correct: 0 },
                    { type: 'Sentence Purpose', objective: 'Sentence Purpose', q: "What is the purpose of: 'Digital platforms, educational software... have extended learning...'?", options: ["Topic sentence", "Explanation / example", "Limitation", "Conclusion"], correct: 1 },
                    { type: 'Sentence Purpose', objective: 'Sentence Purpose', q: "What is the purpose of: 'Many digital systems are designed to adapt to individual learners...'?", options: ["Topic sentence", "Example / elaboration", "Limitation", "Recommendation"], correct: 1 },
                    { type: 'Sentence Purpose', objective: 'Sentence Purpose', q: "What is the purpose of: 'Excessive use of digital tools may limit opportunities for direct social interaction.'?", options: ["Topic sentence", "Example", "Evaluation / limitation", "Recommendation"], correct: 2 },
                    { type: 'Sentence Purpose', objective: 'Sentence Purpose', q: "What is the purpose of: 'For this reason, technology should be integrated in a balanced manner.'?", options: ["Topic sentence", "Example", "Evaluation", "Conclusion or recommendation"], correct: 3 }
                ]
            },
            {
                id: 'conservation',
                title: 'Earth Guardians',
                subtitle: 'Why Every Action Matters',
                icon: 'shield-check',
                difficulty: 'Expert',
                color: 'indigo',
                lo: 'LO 9.3.a',
                text: [
                    { id: 'p1', title: 'P1: Introduction', content: "The environment includes everything around us, such as air, water, land, plants, and animals. It provides humans with food, clean water, and resources needed for daily life. However, human activities have caused serious damage to the environment. Understanding environmental problems is the first step toward protecting our planet for future generations." },
                    { id: 'p2', title: 'P2: Pollution and Its Effects', content: "One major environmental problem is pollution. Pollution happens when harmful substances enter the air, water, or soil. For example, factories release smoke into the air, and plastic waste is often thrown into rivers and oceans. As a result, pollution harms wildlife, damages ecosystems, and can cause health problems for humans." },
                    { id: 'p3', title: 'P3: Climate Change', content: "Another serious issue is climate change. Climate change refers to long-term changes in temperature and weather patterns. These changes are mainly caused by human activities such as burning fossil fuels and cutting down forests. Climate change leads to extreme weather, rising sea levels, and the loss of natural habitats." },
                    { id: 'p4', title: 'P4: The Importance of Conservation', content: "Conservation means protecting natural resources and using them wisely. By conserving water, reducing waste, and recycling materials, people can help reduce environmental damage. Governments and organizations also play an important role by creating laws that protect the environment and promote sustainable practices." },
                    { id: 'p5', title: 'P5: What Individuals Can Do', content: "Although environmental problems are global, individuals can still make a difference. Simple actions such as saving electricity, using reusable bags, and planting trees can have a positive impact. When people work together, small actions can lead to big changes and help protect the environment for the future." }
                ],
                questions: [
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "What is the main idea of Paragraph 1?", options: ["The environment is already destroyed", "The environment is important and needs protection", "Humans cannot survive without technology", "Animals are more important than humans"], correct: 1 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "What is the main idea of Paragraph 2?", options: ["Factories help the economy", "Plastic is useful in daily life", "Pollution causes harm to the environment and humans", "Rivers are important natural resources"], correct: 2 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "What is the main idea of Paragraph 3?", options: ["Weather changes every day", "Climate change is caused by natural disasters", "Climate change is a serious problem caused by human activity", "Forests are important for animals"], correct: 2 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "What is the main idea of Paragraph 4?", options: ["Conservation helps protect natural resources", "Governments should control people", "Recycling is difficult", "Natural resources will never run out"], correct: 0 },
                    { type: 'Main Idea', objective: 'Identify Main Ideas', q: "What is the main idea of Paragraph 5?", options: ["Environmental problems are impossible to solve", "Only governments can protect the environment", "Individuals can help protect the environment through simple actions", "Trees are the most important solution"], correct: 2 },
                    { type: 'Purpose', objective: 'Sentence Purpose', q: "What is the purpose of the first sentence in Paragraph 1?", options: ["To give an example", "To define the environment", "To explain a solution", "To describe a problem"], correct: 1 },
                    { type: 'Detail', objective: 'Connection between Details', q: "Why does the writer mention factories and plastic waste in Paragraph 2?", options: ["To suggest solutions", "To compare two ideas", "To give examples of pollution", "To explain history"], correct: 2 },
                    { type: 'Evidence', objective: 'Sentence Purpose', q: "Which sentence in Paragraph 3 explains the cause of climate change?", options: ["Sentence 1", "Sentence 2", "Sentence 3", "Sentence 4"], correct: 1 },
                    { type: 'Analysis', objective: 'Connection between Details', q: "How do the details in Paragraph 4 support the main idea?", options: ["They explain why conservation is impossible", "They give examples of conservation actions", "They describe environmental disasters", "They compare past and present"], correct: 1 },
                    { type: 'Synthesis', objective: 'Main Idea Summarization', q: "What is the connection between the main idea and details in Paragraph 5?", options: ["The details explain why individuals should not act", "The details give examples that support the main idea", "The details repeat the introduction", "The details introduce a new topic"], correct: 1 },
                    { type: 'Vocab', objective: 'Vocabulary', q: "The word "resources" in Paragraph 1 most nearly means:", options: ["Rules", "Natural materials people use", "Pollution", "Weather conditions"], correct: 1 },
                    { type: 'Vocab', objective: 'Vocabulary', q: "The word "harmful" in Paragraph 2 means:", options: ["Helpful", "Dangerous", "Expensive", "Natural"], correct: 1 },
                    { type: 'Vocab', objective: 'Vocabulary', q: "The phrase "refers to" in Paragraph 3 is closest in meaning to:", options: ["Is different from", "Is caused by", "Means", "Depends on"], correct: 2 },
                    { type: 'Vocab', objective: 'Vocabulary', q: "The word "sustainable" in Paragraph 4 most nearly means:", options: ["Cheap and easy", "Harmful to nature", "Able to continue without damage", "Temporary"], correct: 2 },
                    { type: 'Vocab', objective: 'Vocabulary', q: "The word "impact" in Paragraph 5 means:", options: ["Opinion", "Result or effect", "Rule", "Problem"], correct: 1 }
                ]
            }
        ];

        // Icon mapping
        const icons = {
            'droplets': `<svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>`,
            'leaf': `<svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>`,
            'cpu': `<svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path></svg>`,
            'shield-check': `<svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>`,
            'book-open': `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>`,
            'award': `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>`,
            'info': `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            'check-circle': `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            'chevron-right': `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>`,
            'chevron-left': `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>`,
            'target': `<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-14c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>`,
            'flag': `<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"></path></svg>`,
            'list-checks': `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>`,
            'alert-circle': `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`
        };

        // Event Handlers
        function handleAnswer(index) {
            const currentQuestion = state.activeModule.questions[state.currentStep];
            if (index === currentQuestion.correct) {
                state.feedback = { type: 'success', msg: 'Correct! +100 XP' };
                state.userStats.points += 100;
                render();
                
                setTimeout(() => {
                    if (state.currentStep < state.activeModule.questions.length - 1) {
                        state.currentStep++;
                        state.feedback = null;
                    } else {
                        state.feedback = { type: 'finish', msg: 'Quest Complete! You have achieved mastery.' };
                        if (!state.userStats.completedModules.includes(state.activeModule.id)) {
                            state.userStats.completedModules.push(state.activeModule.id);
                        }
                    }
                    render();
                }, 1200);
            } else {
                state.feedback = { type: 'error', msg: 'Incorrect. Re-read the paragraph carefully!' };
                render();
                setTimeout(() => {
                    state.feedback = null;
                    render();
                }, 2000);
            }
        }

        function startModule(mod) {
            state.activeModule = mod;
            state.currentStep = 0;
            state.currentPage = 'module';
            state.feedback = null;
            render();
            window.scrollTo(0, 0);
        }

        function goToLanding() {
            state.currentPage = 'landing';
            state.activeModule = null;
            render();
            window.scrollTo(0, 0);
        }

        // Render Functions
        function renderProgressBar(value, max) {
            return `
                <div class="w-full bg-slate-200 h-2 rounded-full overflow-hidden">
                    <div class="bg-indigo-600 h-full transition-all duration-500" style="width: ${(value / max) * 100}%"></div>
                </div>
            `;
        }

        function renderCertificateModal() {
            if (!state.showFinalCert) {
                return `
                    <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-md z-[60] flex items-center justify-center p-4">
                        <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 animate-in">
                            <div class="text-center mb-8">
                                <div class="inline-block p-4 bg-indigo-100 rounded-full mb-4">
                                    ${icons['award'].replace('w-4 h-4', 'w-12 h-12').replace('currentColor', '#4f46e5')}
                                </div>
                                <h2 class="text-2xl font-bold text-slate-800">Claim Your Certificate</h2>
                                <p class="text-slate-500 mt-2">Achievement deserves official recognition. Enter your details below.</p>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-400 uppercase mb-1 tracking-wider">Full Student Name</label>
                                    <input 
                                        type="text"
                                        id="studentName"
                                        value="${state.studentInfo.name}"
                                        class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"
                                        placeholder="Student Name"
                                    />
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-400 uppercase mb-1 tracking-wider">Class / Grade</label>
                                    <input 
                                        type="text"
                                        id="studentClass"
                                        value="${state.studentInfo.className}"
                                        class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"
                                        placeholder="Class Name"
                                    />
                                </div>
                            </div>
                            <button 
                                onclick="generateCertificate()"
                                class="w-full mt-8 bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition-all"
                            >
                                Generate My Certificate
                            </button>
                        </div>
                    </div>
                `;
            } else {
                const certId = Math.random().toString(36).substr(2, 9).toUpperCase();
                return `
                    <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-md z-[60] flex items-center justify-center p-4">
                        <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full p-1 animate-in overflow-hidden max-h-[90vh] overflow-y-auto">
                            <div class="bg-white p-10 md:p-16 border-8 border-double border-indigo-100 rounded-[2.2rem] relative m-1">
                                <div class="absolute top-0 right-0 p-8 opacity-10">
                                    ${icons['award'].replace('w-4 h-4', 'w-64 h-64').replace('currentColor', '#312e81')}
                                </div>
                                <div class="text-center relative z-10">
                                    ${icons['book-open'].replace('w-6 h-6', 'w-12 h-12').replace('currentColor', '#4f46e5')}
                                    <h1 class="text-5xl font-serif text-slate-800 mb-2 mt-6">Certificate of Mastery</h1>
                                    <p class="text-slate-400 font-bold uppercase tracking-[0.3em] text-sm mb-12">ReadingQuest Academic Achievement</p>
                                    <div class="mb-12">
                                        <p class="text-slate-500 italic text-xl mb-4">This is to certify that</p>
                                        <h2 class="text-4xl font-bold text-indigo-700 border-b-2 border-slate-200 inline-block px-16 py-2 mb-4 font-serif">${state.studentInfo.name}</h2>
                                        <p class="text-slate-500 text-lg">representing Class <span class="font-bold text-slate-800 tracking-wider">${state.studentInfo.className}</span></p>
                                    </div>
                                    <div class="max-w-xl mx-auto mb-16 bg-white p-6 rounded-2xl border border-slate-100 shadow-sm text-sm">
                                        <p class="text-slate-600 leading-relaxed mb-4">Successfully completed the <strong>${state.activeModule.title}</strong> quest, demonstrating expert proficiency in <strong>${state.activeModule.lo}</strong>.</p>
                                        <div class="flex justify-center gap-2">
                                            <span class="bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-tighter">Analytical Literacy</span>
                                            <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-tighter">Main Idea Identification</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-col md:flex-row justify-between items-center gap-8 mt-12 px-12">
                                        <div class="text-center">
                                            <div class="w-48 border-b border-slate-300 py-2 mb-1"><span class="font-serif italic text-slate-400 text-sm">ReadingQuest Academy</span></div>
                                            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Master Educator</p>
                                        </div>
                                        <div class="bg-indigo-600 text-white p-4 rounded-full shadow-lg">
                                            ${icons['shield-check'].replace('w-8 h-8', 'w-10 h-10').replace('currentColor', '#ffffff')}
                                        </div>
                                        <div class="text-center">
                                            <div class="w-48 border-b border-slate-300 py-2 mb-1"><span class="font-mono text-slate-800 text-sm">${new Date().toLocaleDateString()}</span></div>
                                            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Date Issued</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-900 p-4 flex justify-between items-center px-8">
                                <p class="text-slate-500 text-xs tracking-widest uppercase">CERT-ID: ${certId}</p>
                                <button onclick="closeCertificate()" class="text-white px-8 py-2 rounded-lg font-bold bg-indigo-600 hover:bg-indigo-500 transition-all text-sm">Return to Trails</button>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function renderHandbookOverlay() {
            return `
                <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
                    <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="sticky top-0 bg-white border-b p-6 flex justify-between items-center z-10">
                            <div class="flex items-center gap-3">
                                ${icons['book-open']}
                                <h2 class="text-2xl font-bold text-slate-800 font-serif">Reading Strategist's Handbook</h2>
                            </div>
                            <button onclick="closeHandbook()" class="p-2 hover:bg-slate-100 rounded-full transition-colors font-bold">✕</button>
                        </div>
                        <div class="p-8 space-y-8">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-blue-50 p-6 rounded-2xl border border-blue-100">
                                    <div class="flex items-center gap-3 mb-4 text-blue-700 font-bold">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                                        1. Skimming
                                    </div>
                                    <p class="text-sm text-blue-800 leading-relaxed">Reading rapidly to get the general overview. Focus on titles, subheadings, and the first/last sentences of paragraphs.</p>
                                </div>
                                <div class="bg-emerald-50 p-6 rounded-2xl border border-emerald-100">
                                    <div class="flex items-center gap-3 mb-4 text-emerald-700 font-bold">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                        2. Scanning
                                    </div>
                                    <p class="text-sm text-emerald-800 leading-relaxed">Looking for specific information like dates, names, or numbers. Don't read everything; move your eyes in a Z-pattern.</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6 border-t text-center">
                            <button onclick="closeHandbook()" class="bg-indigo-600 text-white px-12 py-3 rounded-full font-bold hover:bg-indigo-700 transition-all">I Understand</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderLandingPage() {
            return `
                <div class="max-w-5xl mx-auto px-6 py-12 animate-in">
                    <div class="mb-10 bg-white border border-slate-200 rounded-3xl p-8 flex flex-col md:flex-row gap-8 items-center shadow-sm relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-5">
                            <svg class="w-40 h-40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path></svg>
                        </div>
                        <div class="bg-indigo-600 text-white p-5 rounded-2xl shrink-0 shadow-lg shadow-indigo-100">
                            ${icons['flag']}
                        </div>
                        <div>
                            <div class="flex items-center gap-2 mb-2">
                                <span class="bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase">Curriculum Target</span>
                                <span class="text-slate-400 font-bold text-[10px] uppercase tracking-widest">LO 9.3.a Mastery</span>
                            </div>
                            <h2 class="text-3xl font-bold text-slate-800 mb-2 font-serif">Reading Mastery Quest</h2>
                            <p class="text-slate-600 text-sm italic">"Learners will identify main ideas, sentence purposes, and the connection between points in complex texts."</p>
                        </div>
                    </div>

                    <header class="mb-12 text-center">
                        <h2 class="text-4xl font-extrabold mb-4 text-slate-800 font-serif">The Mastery Trails</h2>
                        <p class="text-slate-500 text-lg">Select a trail to test your expertise.</p>
                    </header>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        ${modules.map(mod => `
                            <div onclick="startModule(modules[${modules.indexOf(mod)}])" class="group relative bg-white border border-slate-200 rounded-3xl p-6 shadow-sm hover:shadow-2xl transition-all hover:-translate-y-2 cursor-pointer flex flex-col">
                                <div class="mb-4">${icons[mod.icon]}</div>
                                <h3 class="text-xl font-bold mb-1 font-serif text-slate-800">${mod.title}</h3>
                                <p class="text-slate-500 text-xs mb-4 leading-relaxed line-clamp-2">${mod.subtitle}</p>
                                <div class="mt-auto pt-4 flex items-center justify-between border-t border-slate-50">
                                    <span class="text-[10px] font-bold px-2 py-1 rounded-full ${mod.difficulty === 'Expert' ? 'bg-indigo-50 text-indigo-600' : 'bg-slate-50 text-slate-500'} uppercase tracking-widest">${mod.difficulty}</span>
                                    ${state.userStats.completedModules.includes(mod.id) 
                                        ? icons['check-circle'].replace('currentColor', '#22c55e')
                                        : icons['chevron-right'].replace('currentColor', '#cbd5e1').replace('w-5 h-5', 'w-5 h-5 group-hover:text-indigo-600')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderModulePage() {
            const currentQ = state.activeModule.questions[state.currentStep];
            
            return `
                <div class="max-w-7xl mx-auto px-6 py-8 animate-in">
                    <div class="mb-8 flex items-center justify-between">
                        <button onclick="goToLanding()" class="flex items-center gap-2 text-slate-400 hover:text-slate-800 font-bold uppercase text-[10px] tracking-widest">
                            ${icons['chevron-left']} Exit Quest
                        </button>
                        <div class="w-80">
                            <div class="flex justify-between text-[10px] font-bold text-slate-400 mb-1 uppercase tracking-widest">
                                <span>Progress</span>
                                <span>${state.currentStep + 1} / ${state.activeModule.questions.length}</span>
                            </div>
                            ${renderProgressBar(state.currentStep + 1, state.activeModule.questions.length)}
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
                        <div class="bg-white border border-slate-200 rounded-3xl shadow-sm p-10 sticky top-24 max-h-[75vh] overflow-y-auto">
                            <h3 class="text-xl font-bold mb-8 flex items-center gap-3 font-serif border-b pb-4">
                                ${icons['book-open']}
                                Reading Pane
                            </h3>
                            <div class="space-y-10">
                                ${state.activeModule.text.map((p, i) => `
                                    <div class="relative pl-8 group">
                                        <span class="absolute left-0 top-0 text-[10px] font-black text-slate-200 group-hover:text-indigo-200 transition-colors uppercase vertical-rl tracking-[0.5em]">PARA ${i+1}</span>
                                        <p class="text-slate-700 leading-relaxed text-lg">${p.content}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-slate-900 text-white rounded-3xl p-10 shadow-xl min-h-[500px] flex flex-col relative overflow-hidden">
                                <div class="absolute -right-8 -top-8 w-40 h-40 bg-indigo-600/10 rounded-full blur-3xl"></div>
                                <div class="flex items-center justify-between mb-8 relative z-10">
                                    <span class="bg-indigo-600 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest">Task: ${currentQ.type}</span>
                                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                                        ${icons['target'].replace('currentColor', '#818cf8')} LO 9.3.a
                                    </div>
                                </div>
                                <h4 class="text-2xl font-bold leading-tight mb-10 relative z-10 font-serif">${currentQ.q}</h4>
                                <div class="space-y-4 mt-auto relative z-10">
                                    ${currentQ.options.map((option, idx) => `
                                        <button 
                                            onclick="handleAnswer(${idx})" 
                                            ${state.feedback !== null ? 'disabled' : ''}
                                            class="w-full text-left p-5 rounded-2xl border border-slate-800 bg-slate-800/50 hover:bg-slate-800 hover:border-indigo-500 transition-all flex items-center justify-between group ${state.feedback !== null ? 'opacity-50 cursor-not-allowed' : ''}"
                                        >
                                            <span class="text-slate-300 group-hover:text-white transition-colors">${option}</span>
                                            ${icons['chevron-right'].replace('w-5 h-5', 'w-4 h-4').replace('currentColor', '#818cf8').replace('class="', 'class="opacity-0 group-hover:opacity-100 transition-all ')}
                                        </button>
                                    `).join('')}
                                </div>
                                ${state.feedback ? `
                                    <div class="mt-8 p-6 rounded-2xl flex items-center gap-4 animate-in ${
                                        state.feedback.type === 'success' 
                                            ? 'bg-green-500/10 text-green-400 border border-green-500/20' 
                                            : state.feedback.type === 'finish' 
                                                ? 'bg-indigo-600 text-white shadow-lg' 
                                                : 'bg-red-500/10 text-red-400 border border-red-500/20'
                                    }">
                                        ${state.feedback.type === 'success' || state.feedback.type === 'finish' 
                                            ? icons['check-circle'].replace('w-5 h-5', 'w-8 h-8').replace('currentColor', state.feedback.type === 'finish' ? '#ffffff' : '#4ade80')
                                            : icons['alert-circle'].replace('currentColor', '#f87171')}
                                        <div class="flex-1">
                                            <p class="font-bold text-lg">${state.feedback.msg}</p>
                                            ${state.feedback.type === 'finish' ? `
                                                <div class="mt-4 flex gap-4">
                                                    <button onclick="showCertForm()" class="bg-white text-indigo-600 px-8 py-2 rounded-full font-black text-xs uppercase tracking-widest hover:bg-slate-100 transition-all shadow-md">Claim Certificate</button>
                                                    <button onclick="goToLanding()" class="bg-indigo-500 text-white px-8 py-2 rounded-full font-black text-xs uppercase tracking-widest border border-indigo-400 hover:bg-indigo-400 transition-all">Exit Trail</button>
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>

                            <div class="bg-white border border-slate-200 rounded-3xl p-8 shadow-sm">
                                <div class="flex items-center gap-3 mb-6 text-slate-800 font-bold border-b border-slate-50 pb-4">
                                    ${icons['list-checks'].replace('currentColor', '#4f46e5')} Mastery Checklist
                                </div>
                                <div class="space-y-4">
                                    <div class="flex items-start gap-4 p-4 rounded-2xl transition-all ${state.currentStep >= state.activeModule.questions.length / 2 ? 'bg-green-50 border border-green-100' : 'bg-slate-50 opacity-50'}">
                                        ${icons['check-circle'].replace('currentColor', state.currentStep >= state.activeModule.questions.length / 2 ? '#22c55e' : '#cbd5e1')}
                                        <div>
                                            <h5 class="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1">LO 9.3.a Stage 1</h5>
                                            <p class="text-sm font-medium text-slate-700 italic">Identify purposes of sentences</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-4 p-4 rounded-2xl transition-all ${state.userStats.completedModules.includes(state.activeModule.id) ? 'bg-green-50 border border-green-100' : 'bg-slate-50 opacity-50'}">
                                        ${icons['check-circle'].replace('currentColor', state.userStats.completedModules.includes(state.activeModule.id) ? '#22c55e' : '#cbd5e1')}
                                        <div>
                                            <h5 class="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1">LO 9.3.a Stage 2</h5>
                                            <p class="text-sm font-medium text-slate-700 italic">Summarize main ideas</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            
            let content = `
                <nav class="bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center sticky top-0 z-10 shadow-sm">
                    <div class="flex items-center gap-2 cursor-pointer" onclick="goToLanding()">
                        ${icons['book-open']}
                        <h1 class="text-xl font-bold tracking-tight font-serif">ReadingQuest</h1>
                    </div>
                    <div class="flex items-center gap-6">
                        <button onclick="toggleHandbook()" class="text-slate-500 hover:text-indigo-600 font-bold text-sm flex items-center gap-2">
                            ${icons['info']} Handbook
                        </button>
                        <div class="flex items-center gap-2 bg-indigo-50 px-3 py-1 rounded-full text-indigo-700 font-bold text-sm">
                            ${icons['award']} ${state.userStats.points} XP
                        </div>
                    </div>
                </nav>

                ${state.showHandbook ? renderHandbookOverlay() : ''}
                ${state.showCertForm ? renderCertificateModal() : ''}

                ${state.currentPage === 'landing' ? renderLandingPage() : renderModulePage()}

                <footer class="mt-20 text-center border-t border-slate-100 pt-8 pb-12">
                    <p class="text-[10px] font-black text-slate-300 uppercase tracking-[0.5em]">ReadingQuest © 2026 Academic Excellence</p>
                </footer>
            `;
            
            app.innerHTML = content;

            // Add event listeners for dynamic inputs
            if (state.showCertForm && !state.showFinalCert) {
                const nameInput = document.getElementById('studentName');
                const classInput = document.getElementById('studentClass');
                
                if (nameInput) {
                    nameInput.addEventListener('input', (e) => {
                        state.studentInfo.name = e.target.value;
                    });
                }
                
                if (classInput) {
                    classInput.addEventListener('input', (e) => {
                        state.studentInfo.className = e.target.value;
                    });
                }
            }
        }

        // Global functions
        window.toggleHandbook = function() {
            state.showHandbook = !state.showHandbook;
            render();
        };

        window.closeHandbook = function() {
            state.showHandbook = false;
            render();
        };

        window.showCertForm = function() {
            state.showCertForm = true;
            render();
        };

        window.generateCertificate = function() {
            if (state.studentInfo.name && state.studentInfo.className) {
                state.showFinalCert = true;
                render();
            }
        };

        window.closeCertificate = function() {
            state.showFinalCert = false;
            state.showCertForm = false;
            goToLanding();
        };

        window.handleAnswer = handleAnswer;
        window.startModule = startModule;
        window.goToLanding = goToLanding;
        window.modules = modules;

        // Initial render
        render();
    </script>
</body>
</html>
